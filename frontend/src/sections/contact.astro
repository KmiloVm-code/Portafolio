---
import Github from "@/assets/svg/github.astro";
import Linkedin from "@/assets/svg/linkedin.astro";
---

<section id="contacto" class="py-16 md:py-32 bg-bg relative overflow-hidden">
  <div class="container mx-auto px-6 md:px-12 lg:px-16 max-w-7xl relative z-10">
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-20 lg:gap-32 items-center">
      <!-- Content -->
      <div class="space-y-16">
        <span
          class="text-xs font-bold font-mono text-accent tracking-widest uppercase mb-6"
          >Let's Build Something</span
        >
        <h1
          class="text-5xl md:text-7xl font-bold text-primary mb-10 leading-tight"
        >
          Contacto
        </h1>
        <p class="text-xl text-secondary max-w-md prose text-balance mb-16">
          Estoy disponible para nuevos proyectos y colaboraciones estratégicas.
          Cuéntame tu visión y busquemos la mejor forma de ejecutarla.
        </p>

        <div class="flex gap-6 justify-between max-w-md">
          <a
            class="btn-line flex items-center justify-center w-48 h-14 gap-2 hover:bg-accent-hover hover:text-bg"
            href="https://www.linkedin.com/in/andrescamilovelezmejia/"
            target="_blank"
            rel="noopener noreferrer"
          >
            <Linkedin />
            <span>LinkedIn</span>
          </a>

          <a
            class="btn-line flex items-center justify-center w-48 h-14 gap-2 hover:bg-accent-hover hover:text-bg"
            href="https://github.com/KmiloVm-code"
            target="_blank"
            rel="noopener noreferrer"
          >
            <Github />
            <span>GitHub</span>
          </a>
        </div>
      </div>

      <!-- Form -->
      <div class="w-full">
        <div
          class="bg-card/30 backdrop-blur-2xl border border-border p-10 md:p-14 rounded-[3rem] relative overflow-hidden shadow-2xl min-h-104 md:min-h-120"
        >
          <div id="form-wrapper" data-visible="true" class="space-y-8 transition-all duration-500 ease-out">
            <form id="contact-form" action="#" class="space-y-8">
              <div>
                <label
                  for="name"
                  class="block text-sm font-medium text-primary mb-2"
                  >Nombre</label
                >
                <input
                  type="text"
                  id="name"
                  name="name"
                  required
                  class="w-full px-4 py-3 rounded-lg bg-bg border border-border text-primary focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent"
                />
              </div>

              <div>
                <label
                  for="email"
                  class="block text-sm font-medium text-primary mb-2"
                  >Correo Electrónico</label
                >
                <input
                  type="email"
                  id="email"
                  name="email"
                  required
                  class="w-full px-4 py-3 rounded-lg bg-bg border border-border text-primary focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent"
                />
              </div>

              <div>
                <label
                  for="message"
                  class="block text-sm font-medium text-primary mb-2"
                  >Mensaje</label
                >
                <textarea
                  id="message"
                  name="message"
                  rows="4"
                  required
                  class="w-full px-4 py-3 rounded-lg min-h-32 bg-bg border border-border text-primary focus:outline-none focus:ring-2 focus:ring-accent focus:border-transparent"
                ></textarea>
              </div>

              <button
                type="submit"
                class="btn-primary w-full bg-accent text-bg rounded-lg hover:bg-accent/90 hover:-translate-y-0.5 shadow-md hover:shadow-accent/30 transition-all duration-300"
              >
                Enviar Mensaje
              </button>
            </form>
          </div>

          <div
            id="success-screen"
            data-visible="false"
            class="absolute inset-0 flex flex-col items-center justify-center gap-6 text-center text-primary"
          >
            <div
              class="flex h-24 w-24 items-center justify-center rounded-full border border-border-alt bg-border-alt/10 shadow-[0_0_25px_rgba(18,155,79,0.45)]"
            >
              <svg
                class="h-12 w-12 text-green-500"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path d="M20 6L9 17l-5-5" />
              </svg>
            </div>

            <div class="space-y-3">
              <h2 class="text-3xl font-bold text-primary">¡Mensaje recibido!</h2>
              <p class="text-lg text-secondary">
                Analizaré tu propuesta y te contactaré lo antes posible.
              </p>
            </div>

            <button
              id="send-another"
              class="text-sm font-semibold uppercase tracking-[0.4em] text-accent hover:text-accent-hover hover:-translate-y-0.5 transition-all duration-300 cursor-pointer"
            >
              Enviar otro mensaje
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<script is:inline>
  const form = document.querySelector('#contact-form');
  const formWrapper = document.querySelector('#form-wrapper');
  const successScreen = document.querySelector('#success-screen');
  const sendAnotherBtn = document.querySelector('#send-another');

  const toggleSuccess = (visible) => {
    formWrapper?.setAttribute('data-visible', visible ? 'false' : 'true');
    successScreen?.setAttribute('data-visible', visible ? 'true' : 'false');
    if (visible) {
      sendAnotherBtn?.setAttribute('data-animate', 'true');
      setTimeout(() => sendAnotherBtn?.removeAttribute('data-animate'), 600);
    }
  };

  form?.addEventListener('submit', (event) => {
    event.preventDefault();
    toggleSuccess(true);
  });

  sendAnotherBtn?.addEventListener('click', (event) => {
    event.preventDefault();
    form?.reset();
    toggleSuccess(false);
  });
</script>

<style is:inline>
  #form-wrapper,
  #success-screen {
    transition: opacity 0.5s ease, transform 0.5s ease;
  }

  #form-wrapper[data-visible="false"] {
    opacity: 0;
    transform: translateY(20px);
    pointer-events: none;
    visibility: hidden;
  }

  #form-wrapper[data-visible="true"] {
    opacity: 1;
    transform: translateY(0);
    visibility: visible;
    pointer-events: auto;
  }

  #success-screen {
    pointer-events: none;
    opacity: 0;
    transform: translateY(-20px);
    visibility: hidden;
  }

  #success-screen[data-visible="true"] {
    opacity: 1;
    transform: translateY(0);
    visibility: visible;
    pointer-events: auto;
  }

  #send-another {
    transition: transform 0.3s ease, color 0.3s ease;
  }

  #send-another[data-animate="true"] {
    animation: successButtonPop 0.55s ease;
  }

  @keyframes successButtonPop {
    0% {
      opacity: 0;
      transform: translateY(8px) scale(0.95);
    }
    70% {
      opacity: 1;
      transform: translateY(0) scale(1.08);
    }
    100% {
      transform: translateY(0) scale(1);
    }
  }
</style>
