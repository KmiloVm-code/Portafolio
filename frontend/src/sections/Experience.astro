---
import { getCollection } from "astro:content";
import Briefcase from "@/assets/svg/briefcase-business.astro";

const experienceItems = await getCollection("experience");
---

<section
  id="experiencia"
  class="py-20 px-6 md:px-12 lg:px-24 bg-bg text-primary"
>
  <div class="container mx-auto">
    <div class="flex flex-col items-center mb-16 text-center">
      {/* Section Header */}
      <h1 class="text-4xl font-bold mb-4 text-center">
        Trayectoria Profesional
      </h1>
      <p class="text-lg text-center max-w-2xl mx-auto prose text-secondary text-pretty">
        Un recorrido por los hitos que han definido mi carrera y el valor
        aportado en cada etapa.
      </p>
    </div>

    {/* Timeline Container */}
    <div
      class="relative space-y-8 before:absolute before:inset-0 before:ml-5 before:-translate-x-px md:before:mx-auto md:before:translate-x-0 before:h-full before:w-0.5 before:bg-linear-to-b before:from-transparent before:via-slate-800 before:to-transparent"
    >
      {
        experienceItems.map((item) => (
          <div class="relative flex items-center justify-between md:justify-normal md:odd:flex-row-reverse group is-active">

            {/* Timeline Icon */}
            <div class="flex items-center justify-center border-secondary/40 text-secondary/40 left-0 md:left-1/2 md:-translate-x-1/2 top-1/2 -translate-y-1/2 w-10 h-10 rounded-full bg-bg border group-hover:border-accent shadow-[0_0_10px_rgba(0,0,0,0.5)] md:order-1 md:group-odd:-translate-x-1/2 md:group-even:translate-x-1/2 z-10 group-hover:shadow-accent transition-all duration-300">
              <Briefcase size="20" class="group-hover:text-accent transition-colors duration-300" />
            </div>

            {/* Timeline Content */}
            <article class="w-[calc(100%-4rem)] md:w-[calc(50%-2.5rem)] p-6 rounded-xl border border-slate-800 bg-slate-900/30 hover:bg-slate-900/60 hover:border-accent/80 transition-all duration-300 backdrop-blur-sm">
              <div class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 mb-4">
                <h2 class="text-xl font-bold group-hover:text-accent transition-colors duration-300">
                  {item.data.title}
                </h2>
                <div class="flex items-center gap-2 border border-accent rounded-full px-3 py-1 bg-accent/10">
                  <h4 class="text-xs font-medium text-secondary">
                    {item.data.start_date} - {item.data.end_date}
                  </h4>
                </div>
              </div>
              <h3 class="text-lg font-medium mb-3 text-secondary">
                {item.data.company}
              </h3>
              <p class="text-sm text-secondary paragraph mb-4">
                {item.data.description}
              </p>
              <ul class="list-disc list-inside space-y-2 border-t border-slate-800 pt-4">
                <li class="text-sm text-secondary/40 marker:text-accent">
                  <strong class="font-semibold">Tecnolog√≠as:</strong>{" "}
                  {item.data.technologies}
                </li>
              </ul>
            </article>
          </div>
        ))
      }
    </div>
  </div>
</section>
