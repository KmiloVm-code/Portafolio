---
const techStack = [
  { name: "React", icon: "devicon-react-original", category: "frontend" },
  { name: "Node.js", icon: "devicon-nodejs-plain", category: "backend" },
  { name: "Express", icon: "devicon-express-original", category: "backend" },
  {
    name: "PostgreSQL",
    icon: "devicon-postgresql-plain",
    category: "database",
  },
  {
    name: "AWS",
    icon: "devicon-amazonwebservices-plain-wordmark",
    category: "devops",
  },
  { name: "Azure", icon: "devicon-azure-plain", category: "devops" },
  { name: "Python", icon: "devicon-python-plain", category: "backend" },
  { name: "MongoDB", icon: "devicon-mongodb-plain", category: "database" },
  { name: "Docker", icon: "devicon-docker-plain", category: "devops" },
  { name: "MySQL", icon: "devicon-mysql-plain", category: "database" },
  {
    name: "JavaScript",
    icon: "devicon-javascript-plain",
    category: "frontend",
  },
  {
    name: "TypeScript",
    icon: "devicon-typescript-plain",
    category: "frontend",
  },
  { name: "HTML5/CSS", icon: "devicon-html5-plain", category: "frontend" },
  { name: "GraphQL", icon: "devicon-graphql-plain", category: "backend" },
  { name: "MCP", icon: "/icons/mcp.svg", category: "tools" },
  { name: "N8N", icon: "/icons/n8n.svg", category: "tools" },
  { name: "Agents / LLMs", icon: "/icons/bot.svg", category: "tools" },
  { name: "GitHub", icon: "devicon-github-plain", category: "tools" },
];

const categoryOrder = ["frontend", "backend", "database", "devops", "tools"];
const categories = [...new Set(techStack.map((t) => t.category))].sort(
  (a, b) => categoryOrder.indexOf(a) - categoryOrder.indexOf(b)
);

const groupedTech = categories.reduce(
  (acc, category) => {
    acc[category] = techStack.filter((tech) => tech.category === category);
    return acc;
  },
  {} as Record<string, typeof techStack>
);
---

<section id="sobre-mi" class="py-16 md:py-32 bg-bg relative">
  <div class="container mx-auto px-6 md:px-12 lg:px-16 max-w-7xl z-10">
    <div
      class="mx-auto prose prose-invert text-center mb-10 md:mb-20 timeline-view animate-blurred-fade-in animate-range-[entry_10%_contain_30%]"
    >
      <h1 class="text-4xl font-bold">Acerca de mí</h1>
      <p class="text-lg">
        Conoce más sobre mi experiencia, habilidades técnicas y pasiones que me
        impulsan como Desarrollador Full Stack.
      </p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-16 items-start">
      <div
        class="space-y-8" 
      >
        <div
          class="relative aspect-video w-full mx-auto md:mx-0 rounded-2xl overflow-hidden shadow-sm/60 shadow-accent bg-bg hover:shadow-md/60 transition-shadow duration-300 timeline-view animate-fade-in-right animate-range-entry"
        >
          <img
            class="w-full h-full object-cover hover:scale-105 transition-transform duration-300"
            src="/foto.webp"
            alt="Foto de Andrés Camilo"
            loading="lazy"
            decoding="async"
            onload="this.classList.remove('opacity-0')"
            onerror="this.classList.remove('opacity-0')"
          />
        </div>

        <div class="space-y-8 prose prose-invert timeline-view animate-fade-in-up animate-range-entry">
          <h3 class="text-2xl font-bold text-primary mb-4">
            Hola, soy Andrés Camilo
          </h3>

          <p class="text-lg">
            Soy Desarrollador Full Stack con experiencia en React, Node.js y
            bases de datos relacionales, y un fuerte background en operación,
            observabilidad y cloud (AWS y Azure).
          </p>

          <p class="text-lg">
            Utilizo IA como apoyo activo al desarrollo para mejorar calidad de
            código, refactorización, debugging, documentación y automatización,
            acelerando entregas sin sacrificar buenas prácticas.
          </p>

          <p class="text-lg">
            He trabajado en entornos productivos y de alta criticidad,
            analizando incidentes con Dynatrace y Splunk, y desarrollando
            aplicaciones web completas como e-commerce y apps de finanzas
            personales, enfocadas en rendimiento y escalabilidad.
          </p>

          <p class="text-lg">
            Me interesa seguir creciendo en arquitectura, cloud, DevOps y
            soluciones potenciadas con IA.
          </p>

          <button class="btn-primary hover:bg-accent-hover transition-colors">
            Descargar CV
          </button>
        </div>
      </div>

      <div
        class="space-y-12 timeline-view animate-fade-in-left animate-range-entry"
      >
        <h2 class="text-3xl font-bold text-center mb-8">
          Mis Habilidades Técnicas
        </h2>

        <div
          class="grid grid-cols-3 xl:grid-cols-5 gap-x-4 gap-y-10 justify-items-center"
        >
          {
            categories.map((category) => (
              <div class="space-y-4 text-center">
                <h4 class="text-xs font-bold text-accent uppercase tracking-wider border-b border-border pb-2">
                  {category}
                </h4>
                <div class="flex flex-col gap-4 md:gap-10 mt-4 justify-center">
                  {groupedTech[category].map((tech) => (
                    <div class="flex flex-col items-center space-y-2 group">
                        {
                        tech.icon.startsWith("devicon-") ? (
                          <i
                          class={`${tech.icon} text-4xl text-icon group-hover:text-accent-hover transition-colors duration-300`}
                          aria-hidden="true"
                          />
                        ) : tech.icon.endsWith(".svg") ? (
                          <span
                          class="w-9 h-9 bg-icon group-hover:bg-accent-hover transition-colors duration-300"
                          style={`-webkit-mask: url('${tech.icon}') center / contain no-repeat; mask: url('${tech.icon}') center / contain no-repeat;`}
                          aria-hidden="true"
                          />
                        ) : (
                          <img
                          src={tech.icon}
                          alt={tech.name}
                          class="w-9 h-9 object-contain group-hover:scale-110 transition-transform duration-300"
                          loading="lazy"
                          decoding="async"
                          />
                        )
                        }
                      <span class="text-sm text-center font-medium text-secondary select-none group-hover:text-primary transition-colors duration-300">
                        {tech.name}
                      </span>
                    </div>
                  ))}
                </div>
              </div>
            ))
          }
        </div>
      </div>
    </div>
  </div>
</section>
